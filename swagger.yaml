openapi: 3.0.0
info:
  title: My Book Shelf API - Final Complete Definition
  version: 3.0.0
  description: |
    API Ø¬Ø§Ù…Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ (My Book Shelf).
    Ø´Ø§Ù…Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ØŒ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ØŒ Ø§Ù…Ø§Ù†Ø§ØªØŒ Ù‚ÙØ³Ù‡ Ø´Ø®ØµÛŒØŒ Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§ Ùˆ Ù…Ø­ØªÙˆØ§ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡.
    Ø§Ø¹ØªØ¨Ø§Ø±Ù†Ø§Ù…Ù‡â€ŒÛŒ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ù„Ø§Ú¯ÛŒÙ†: email: staff@test.com / password: testpass123
  contact:
    name: My Book Shelf Team
    url: https://example.com/project-url
    email: contact@example.com
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html

servers:
  - url: http://localhost:3000/api
    description: Ø³Ø±ÙˆØ± ØªÙˆØ³Ø¹Ù‡ Ù…Ø­Ù„ÛŒ

paths:
  # ----------------------------------------------------
  # HOME PATHS
  # ----------------------------------------------------
  /home/dynamic-data:
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÙˆÛŒØ§ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ (Quote Ùˆ News)
      tags: [Home]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø´Ø§Ù…Ù„ Ù†Ù‚Ù„ Ù‚ÙˆÙ„ Ø±ÙˆØ² Ùˆ Ø§Ø®Ø¨Ø§Ø±.
          content:
            application/json:
              schema:
                type: object
                properties:
                  quote_of_the_day:
                    type: string
                    description: Ù†Ù‚Ù„ Ù‚ÙˆÙ„ Ø±ÙˆØ².
                  news_sources:
                    type: array
                    items:
                      $ref: '#/components/schemas/NewsSource'

  # ----------------------------------------------------
  # USERS & PROFILE PATHS
  # ----------------------------------------------------
  /users/register:
    post:
      summary: Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
      tags: [Users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistration'
      responses:
        '201':
          description: Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ù†Ø§Ù… Ø´Ø¯.
        '400':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±.

  /users/login:
    post:
      summary: ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø± Ùˆ Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù† JWT
      tags: [Users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLogin'
            example:
              email: "staff@test.com"
              password: "testpass123"
      responses:
        '200':
          description: ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ØŒ Ø´Ø§Ù…Ù„ ØªÙˆÚ©Ù† JWT Ø¨Ø±Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: ØªÙˆÚ©Ù† JWT Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ù‡Ø¯Ø± Authorization Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ
                  user_id:
                    type: string
                    description: Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±
              example:
                token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                user_id: "123e4567-e89b-12d3-a456-426614174000"
        '401':
          description: Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡.

  /users/logout:
    post:
      summary: Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ… Ùˆ Ø¨Ø§Ø·Ù„ Ú©Ø±Ø¯Ù† ØªÙˆÚ©Ù†
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø®Ø±ÙˆØ¬ Ù…ÙˆÙÙ‚ØŒ ØªÙˆÚ©Ù† Ø¨Ø§Ø·Ù„ Ø´Ø¯.

  /users:
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† (ÙÙ‚Ø· Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯) ğŸ”
      description: Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ù„ÛŒØ³Øª ØªÙ…Ø§Ù… Ú©Ø§Ø±Ø¨Ø±Ø§Ù†. Ù†ÛŒØ§Ø² Ø¨Ù‡ **ØªÙˆÚ©Ù† Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª (Bearer Token)** Ø¯Ø§Ø±Ø¯.
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '401':
          description: Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª.

  /users/{userId}:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
        description: Ø´Ù†Ø§Ø³Ù‡ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ú©Ø§Ø±Ø¨Ø±
        
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø®Ø§Øµ
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: Ú©Ø§Ø±Ø¨Ø± Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.

    put:
      summary: ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
      tags: [Users]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdate'
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯.

    delete:
      summary: Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '204':
          description: Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯.

  /users/{userId}/profile:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø± (Profile Menu)
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  /users/{userId}/payments:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± (Pending/Success)
      tags: [Payments]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'

  /payments/initiate:
    post:
      summary: Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ù¾Ø±Ø¯Ø§Ø®Øª (Ù…Ø§Ù†Ù†Ø¯ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¬Ø±ÛŒÙ…Ù‡)
      tags: [Payments]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [user_id, payment_id, card_details]
              properties:
                user_id:
                  type: string
                  format: uuid
                payment_id:
                  type: string
                  format: uuid
                  description: Ø´Ù†Ø§Ø³Ù‡ Ù¾Ø±Ø¯Ø§Ø®ØªÛŒ Ú©Ù‡ Ù‚Ø±Ø§Ø± Ø§Ø³Øª Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯ (Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø¬Ø±ÛŒÙ…Ù‡).
                card_details:
                  type: object
                  description: Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Øª Ù¾Ø±Ø¯Ø§Ø®Øª (Ø¨Ø±Ø§ÛŒ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)
                  properties:
                    card_number:
                      type: string
                    expiry:
                        type: string
                    cvv:
                        type: string
      responses:
        '200':
          description: Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù…ÛŒØ² Ø¨ÙˆØ¯.
        '400':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ù†Ú©.

  /users/{userId}/shelf:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù‚ÙØ³Ù‡ Ù…Ù† (Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø§Ù†ØªÛŒ)
      tags: [MyShelf]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø§Ù†Øª Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BorrowRecord'

  /users/{userId}/favourites:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø¹Ù„Ø§Ù‚Ù‡
      tags: [MyShelf]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø¹Ù„Ø§Ù‚Ù‡ Ú©Ø§Ø±Ø¨Ø±.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Book'

  # ----------------------------------------------------
  # BOOKS & BORROW PATHS
  # ----------------------------------------------------
  /books:
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ (Ø¨Ø§ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡)
      description: Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ù„ÛŒØ³Øª ØªÙ…Ø§Ù… Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ØŒ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡.
      tags: [Books]
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ.
        - in: query
          name: search_by
          schema:
            type: string
            enum: [Title, Author, Text, Subjects]
            default: Title
          description: ÙÛŒÙ„Ø¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ (Title, Author, Text, Subjects).
        - in: query
          name: category
          schema:
            type: string
          description: ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø³ØªÙ‡/Ú˜Ø§Ù†Ø±
        - in: query
          name: language
          schema:
            type: string
          description: ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ø¨Ø§Ù†
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: offset
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Book'

    post:
      summary: Ø§ÙØ²ÙˆØ¯Ù† Ú©ØªØ§Ø¨ Ø¬Ø¯ÛŒØ¯ (Contribute) ğŸ”
      tags: [Books]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Book'
      responses:
        '201':
          description: Ú©ØªØ§Ø¨ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.
        '403':
          description: Ø¯Ø³ØªØ±Ø³ÛŒ ØºÛŒØ±Ù…Ø¬Ø§Ø².

  /books/{bookId}:
    parameters:
      - in: path
        name: bookId
        required: true
        schema:
          type: string
          format: uuid
        description: Ø´Ù†Ø§Ø³Ù‡ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ú©ØªØ§Ø¨
        
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø²Ø¦ÛŒØ§Øª Ú©ØªØ§Ø¨ (Book Preview)
      tags: [Books]
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©ØªØ§Ø¨ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Book'
        '404':
          description: Ú©ØªØ§Ø¨ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.

    put:
      summary: ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©ØªØ§Ø¨
      tags: [Books]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Book'
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©ØªØ§Ø¨ ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯.

    delete:
      summary: Ø­Ø°Ù Ú©ØªØ§Ø¨
      tags: [Books]
      security:
        - BearerAuth: []
      responses:
        '204':
          description: Ú©ØªØ§Ø¨ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯.

  /books/{bookId}/content:
    parameters:
      - in: path
        name: bookId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ E-book Ùˆ Audio (Read Now / Listen)
      tags: [Content]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø¬Ø²Ø¦ÛŒØ§Øª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø­ØªÙˆØ§
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookContent'
        '403':
          description: Ú©Ø§Ø±Ø¨Ø± Ø§ÛŒÙ† Ú©ØªØ§Ø¨ Ø±Ø§ Ø§Ù…Ø§Ù†Øª Ù†Ú¯Ø±ÙØªÙ‡ Ø§Ø³Øª.

  /books/{bookId}/notes:
    parameters:
      - in: path
        name: bookId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©ØªØ§Ø¨
      tags: [Content]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Note'
    post:
      summary: Ø°Ø®ÛŒØ±Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø¬Ø¯ÛŒØ¯
      tags: [Content]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id:
                  type: string
                page_number:
                  type: integer
                note_text:
                  type: string
              required: [user_id, page_number, note_text]
      responses:
        '201':
          description: ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯.

  /books/{bookId}/borrow:
    parameters:
      - in: path
        name: bookId
        required: true
        schema:
          type: string
          format: uuid
        description: Ø´Ù†Ø§Ø³Ù‡ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ú©ØªØ§Ø¨
    post:
      summary: Ø§Ù…Ø§Ù†Øª Ú¯Ø±ÙØªÙ† Ú©ØªØ§Ø¨ (Borrow)
      tags: [Borrow]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [user_id, book_serial_number]
              properties:
                user_id:
                  type: string
                  format: uuid
                  description: Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø§Ù…Ø§Ù†Øª Ú¯ÛŒØ±Ù†Ø¯Ù‡
                book_serial_number:
                  type: string
                  description: Ø´Ù…Ø§Ø±Ù‡ Ø³Ø±ÛŒØ§Ù„ Ù†Ø³Ø®Ù‡ ÙÛŒØ²ÛŒÚ©ÛŒ Ú©ØªØ§Ø¨.
                due_date:
                  type: string
                  format: date
                  description: ØªØ§Ø±ÛŒØ® Ø¨Ø§Ø²Ú¯Ø´Øª Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ¸Ø§Ø± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
                purpose:
                  type: string
                  description: Ù‡Ø¯Ù Ø§Ù…Ø§Ù†Øª Ú¯Ø±ÙØªÙ† Ú©ØªØ§Ø¨ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
      responses:
        '201':
          description: Ú©ØªØ§Ø¨ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù…Ø§Ù†Øª Ú¯Ø±ÙØªÙ‡ Ø´Ø¯.
        '400':
          description: Ú©ØªØ§Ø¨ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª ÛŒØ§ Ú©Ø§Ø±Ø¨Ø± Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯Ø§Ø±Ø¯.

  /books/{bookId}/return:
    parameters:
      - in: path
        name: bookId
        required: true
        schema:
          type: string
          format: uuid
        description: Ø´Ù†Ø§Ø³Ù‡ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ú©ØªØ§Ø¨
    post:
      summary: Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ú©ØªØ§Ø¨ (My Shelf Return)
      tags: [Borrow]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [user_id, book_serial_number]
              properties:
                user_id:
                  type: string
                  format: uuid
                  description: Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±
                book_serial_number:
                  type: string
                  description: Ø´Ù…Ø§Ø±Ù‡ Ø³Ø±ÛŒØ§Ù„ Ú©ØªØ§Ø¨ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ø´Ø¯Ù‡.
                fine_paid:
                  type: boolean
                  description: Ø¢ÛŒØ§ Ø¬Ø±ÛŒÙ…Ù‡ (Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯) Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
      responses:
        '200':
          description: Ú©ØªØ§Ø¨ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ø´Ø¯.
        '400':
          description: Ø®Ø·Ø§ÛŒ Ø¨Ø§Ø²Ú¯Ø´Øª.

  # ----------------------------------------------------
  # CONTRIBUTE PATHS
  # ----------------------------------------------------
  /contribute:
    post:
      summary: Ø§Ø±Ø³Ø§Ù„ Ú©ØªØ§Ø¨ ÛŒØ§ Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ
      tags: [Contribute]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                author:
                  type: string
                file:
                  type: string
                  format: binary
              required: [title, author, file]
      responses:
        '202':
          description: Ù…Ø´Ø§Ø±Ú©Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ùˆ Ø¯Ø± ØµÙ Ø¨Ø±Ø±Ø³ÛŒ Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØª.

  /contribute/submissions:
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ù…Ø´Ø§Ø±Ú©Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ÛŒ Ú©Ø§Ø±Ø¨Ø±
      tags: [Contribute]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ù…Ø´Ø§Ø±Ú©Øªâ€ŒÙ‡Ø§
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    submission_id:
                      type: string
                    status:
                      type: string
                      enum: [Pending, Approved, Rejected]

components:
  schemas:
    User:
      type: object
      properties:
        user_id:
          type: string
          format: uuid
          description: Ø´Ù†Ø§Ø³Ù‡ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ú©Ø§Ø±Ø¨Ø±
        reg_number:
          type: string
          description: Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ú©Ø§Ù„Ø¬ ÛŒØ§ Ø´Ù†Ø§Ø³Ù‡ Ù¾Ø±Ø³Ù†Ù„ÛŒ.
        email:
          type: string
          format: email
          description: Ø§ÛŒÙ…ÛŒÙ„ Ú©Ø§Ù„Ø¬ ÛŒØ§ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ.
        role:
          type: string
          enum: ["student", "staff"]
          description: Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø³ÛŒØ³ØªÙ….
        is_active:
          type: boolean
          description: ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ.
        readings_count:
          type: integer
          description: ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ§Ù†Ø¯Ù‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±.
        contribution_count:
          type: integer
          description: ØªØ¹Ø¯Ø§Ø¯ Ù…Ø´Ø§Ø±Ú©Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±.
        phone_number:
          type: string
          description: Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ú©Ø§Ø±Ø¨Ø±.

    UserRegistration:
      type: object
      required: [reg_number, email, password, confirm_password]
      properties:
        reg_number:
          type: string
          description: Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ú©Ø§Ù„Ø¬ ÛŒØ§ Ø´Ù†Ø§Ø³Ù‡ Ù¾Ø±Ø³Ù†Ù„ÛŒ.
        email:
          type: string
          format: email
          description: Ø§ÛŒÙ…ÛŒÙ„ Ú©Ø§Ù„Ø¬ ÛŒØ§ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ.
        password:
          type: string
          format: password
          description: Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯.
        confirm_password:
          type: string
          format: password
          description: ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø±Ø§ÛŒ ØªØ§ÛŒÛŒØ¯.

    UserLogin:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
      example:
        email: "staff@test.com"
        password: "testpass123"

    UserUpdate:
      type: object
      properties:
        reg_number:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
          format: password

    Book:
      type: object
      properties:
        book_id:
          type: string
          format: uuid
        title:
          type: string
        author:
          type: string
        isbn:
          type: string
        description:
          type: string
        language:
          type: string
        page_count:
          type: integer
        categories:
          type: array
          items:
            type: string
        cover_url:
          type: string
          format: url
        avg_rating:
          type: number
          format: float
        publication_year:
          type: integer
        is_available:
          type: boolean
        stock_status:
          type: string
          enum: [In-Shelf, Borrowed, E-book-Only]

    BorrowRecord:
      type: object
      properties:
        shelf_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        book_id:
          type: string
          format: uuid
        book_serial_number:
          type: string
        purpose:
          type: string
        borrow_date:
          type: string
          format: date
        due_date:
          type: string
          format: date
        is_returned:
          type: boolean
        last_read_page:
          type: integer

    Payment:
      type: object
      properties:
        payment_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        book_title:
          type: string
        book_format:
          type: string
          enum: [Hard Copy, E-Book, Audio book]
        usage_days:
          type: string
        penalty_amount:
          type: number
          format: float
        currency:
          type: string
          example: "IRR"
        payment_status:
          type: string
          enum: [Pending, Success, Failed, Cancelled]
        reason:
          type: string
        payment_date:
          type: string
          format: date

    BookContent:
      type: object
      properties:
        book_id:
          type: string
          format: uuid
        e_book_url:
          type: string
          format: url
        audio_book_url:
          type: string
          format: url
        hard_copy_available:
          type: boolean

    Note:
      type: object
      properties:
        note_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        book_id:
          type: string
          format: uuid
        page_number:
          type: integer
        note_text:
          type: string
        created_at:
          type: string
          format: date-time

    NewsSource:
      type: object
      properties:
        name:
          type: string
        logo_url:
          type: string
          format: url
        link_url:
          type: string
          format: url

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
