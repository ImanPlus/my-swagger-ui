openapi: 3.0.0
info:
  title: My Book Shelf API - Final Complete Definition
  version: 3.0.0
  description: |
    API Ø¬Ø§Ù…Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ (My Book Shelf).
    Ø´Ø§Ù…Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ØŒ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ØŒ Ø§Ù…Ø§Ù†Ø§ØªØŒ Ù‚ÙØ³Ù‡ Ø´Ø®ØµÛŒØŒ Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§ Ùˆ Ù…Ø­ØªÙˆØ§ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡.
    Ø§Ø¹ØªØ¨Ø§Ø±Ù†Ø§Ù…Ù‡â€ŒÛŒ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ù„Ø§Ú¯ÛŒÙ†: email: staff@test.com / password: testpass123
  contact:
    name: My Book Shelf Team
    url: https://example.com/project-url
    email: contact@example.com
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  
servers:
  - url: http://localhost:3000/api
    description: Ø³Ø±ÙˆØ± ØªÙˆØ³Ø¹Ù‡ Ù…Ø­Ù„ÛŒ

paths:
  # ----------------------------------------------------
  # HOME PATHS
  # ----------------------------------------------------
  /home/dynamic-data:
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÙˆÛŒØ§ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ (Quote Ùˆ News)
      tags: [Home]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø´Ø§Ù…Ù„ Ù†Ù‚Ù„ Ù‚ÙˆÙ„ Ø±ÙˆØ² Ùˆ Ø§Ø®Ø¨Ø§Ø±.
          content:
            application/json:
              schema:
                type: object
                properties:
                  quote_of_the_day:
                    type: string
                  news_sources:
                    type: array
                    items:
                      $ref: '#/components/schemas/NewsSource'

  # ----------------------------------------------------
  # USERS & PROFILE PATHS
  # ----------------------------------------------------
  /users/register:
    post:
      summary: Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
      tags: [Users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistration'
      responses:
        '201':
          description: Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ù†Ø§Ù… Ø´Ø¯.
        '400':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±.

  /users/login:
    post:
      summary: ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±
      tags: [Users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLogin'
            example:
              email: "staff@test.com"
              password: "testpass123"
      responses:
        '200':
          description: ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ Ùˆ Ø¯Ø±ÛŒØ§ÙØª ØªÙˆÚ©Ù† JWT
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: JWT token for secure API access
                  user_id:
                    type: string
                    format: uuid
                    description: Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
                  email:
                    type: string
                    format: email
                    description: Ø§ÛŒÙ…ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±
                  role:
                    type: string
                    enum: [student, staff]
                    description: Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
              example:
                token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                user_id: "1f3a9f0c-82a3-42fb-bb36-3e55c715e5b3"
                email: "staff@test.com"
                role: "staff"
        '401':
          description: Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡.

  /users/logout:
    post:
      summary: Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ… Ùˆ Ø¨Ø§Ø·Ù„ Ú©Ø±Ø¯Ù† ØªÙˆÚ©Ù†
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø®Ø±ÙˆØ¬ Ù…ÙˆÙÙ‚ØŒ ØªÙˆÚ©Ù† Ø¨Ø§Ø·Ù„ Ø´Ø¯.

  /users:
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† (ÙÙ‚Ø· Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯) ğŸ”
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '401':
          description: Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª.

  /users/{userId}:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø®Ø§Øµ
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: Ú©Ø§Ø±Ø¨Ø± Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.

    put:
      summary: ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
      tags: [Users]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdate'
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯.

    delete:
      summary: Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '204':
          description: Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯.

  /users/{userId}/profile:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø± (Profile Menu)
      tags: [Users]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  /users/{userId}/payments:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
      tags: [Payments]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒÙ‡Ø§
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'
  
  /payments/initiate:
    post:
      summary: Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ù¾Ø±Ø¯Ø§Ø®Øª (Ù…Ø§Ù†Ù†Ø¯ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¬Ø±ÛŒÙ…Ù‡)
      tags: [Payments]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [user_id, payment_id, card_details]
              properties:
                user_id:
                  type: string
                  format: uuid
                payment_id:
                  type: string
                  format: uuid
                card_details:
                  type: object
                  properties:
                    card_number:
                      type: string
                    expiry:
                      type: string
                    cvv:
                      type: string
      responses:
        '200':
          description: Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù…ÛŒØ² Ø¨ÙˆØ¯.
        '400':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ù†Ú©.

  /users/{userId}/shelf:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù‚ÙØ³Ù‡ Ù…Ù† (Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø§Ù†ØªÛŒ)
      tags: [MyShelf]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø§Ù†Øª Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BorrowRecord'

  /users/{userId}/favourites:
    parameters:
      - in: path
        name: userId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø¹Ù„Ø§Ù‚Ù‡
      tags: [MyShelf]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø¹Ù„Ø§Ù‚Ù‡ Ú©Ø§Ø±Ø¨Ø±.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Book'

  # ----------------------------------------------------
  # BOOKS & BORROW PATHS
  # ----------------------------------------------------
  /books:
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ (Ø¨Ø§ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡)
      tags: [Books]
      parameters:
        - in: query
          name: q
          schema:
            type: string
        - in: query
          name: search_by
          schema:
            type: string
            enum: [Title, Author, Text, Subjects]
            default: Title
        - in: query
          name: category
          schema:
            type: string
        - in: query
          name: language
          schema:
            type: string
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: offset
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Book'

    post:
      summary: Ø§ÙØ²ÙˆØ¯Ù† Ú©ØªØ§Ø¨ Ø¬Ø¯ÛŒØ¯ (Contribute) ğŸ”
      tags: [Books]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Book'
      responses:
        '201':
          description: Ú©ØªØ§Ø¨ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.
        '403':
          description: Ø¯Ø³ØªØ±Ø³ÛŒ ØºÛŒØ±Ù…Ø¬Ø§Ø².

  /books/{bookId}:
    parameters:
      - in: path
        name: bookId
        required: true
        schema:
          type: string
          format: uuid
    get:
      summary: Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø²Ø¦ÛŒØ§Øª Ú©ØªØ§Ø¨
      tags: [Books]
      responses:
        '200':
          description: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©ØªØ§Ø¨ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Book'
        '404':
          description: Ú©ØªØ§Ø¨ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.
